
              ┌───┐           ┌────────┐                                         ┌───┐          ┌────────┐
              │Cli│           │Explorer│                                         │API│          │Reporter│
              └─┬─┘           └───┬────┘                                         └─┬─┘          └───┬────┘
   bkx 6M 6M+1  │                 │                                                │                │
 ───────────────>                 │                                                │                │
                │                 │                                                │                │
                │ track [6M, 6M+1]│                                                │                │
                │  ─ ─ ─ ─ ─ ─ ─ ─>                                                │                │
                │                 │                                                │                │
                │                 │            request Blocks [6M, 6M+1]           │                │
                │                 │ ───────────────────────────────────────────────>                │
                │                 │                                                │                │
                │                 │                                                │                │
          ╔═════╪═╤═══════════════╪════════════════════════════════════════════════╪════════════════╪════╗
          ║ LOOP  │  over all blocks in range                                      │                │    ║
          ╟───────┘               │                                                │                │    ║
          ║     │                 │                                                │                │    ║
          ║     │   ╔═════════════╤════════════════════════════════════════════════╪═══════════╗    │    ║
          ║     │   ║ ACCOUNTING  │                                                │           ║    │    ║
          ║     │   ╟─────────────┘                      block                     │           ║    │    ║
          ║     │   ║             │ <───────────────────────────────────────────────           ║    │    ║
          ║     │   ║             │                                                │           ║    │    ║
          ║     │   ║             │────┐                                                       ║    │    ║
          ║     │   ║             │    │ update Ledger for all transactions in block           ║    │    ║
          ║     │   ║             │<───┘                                                       ║    │    ║
          ║     │   ╚═════════════╪════════════════════════════════════════════════╪═══════════╝    │    ║
          ╚═════╪═════════════════╪════════════════════════════════════════════════╪════════════════╪════╝
                │                 │                                                │                │
                │      Ledger     │                                                │                │
                │ <─ ─ ─ ─ ─ ─ ─ ─                                                 │                │
                │                 │                                                │                │
                │                 │                     Ledger                     │                │
                │  ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─>
              ┌─┴─┐           ┌───┴────┐                                         ┌─┴─┐          ┌───┴────┐
              │Cli│           │Explorer│                                         │API│          │Reporter│
              └───┘           └────────┘                                         └───┘          └────────┘

@startuml

-> Cli: bkx 6M 6M+1
Cli --> Explorer : track [6M, 6M+1]

Explorer -> API : request Blocks [6M, 6M+1]
loop over all blocks in range
  group Accounting
    API -> Explorer : block
    Explorer -> Explorer: update Ledger for all transactions in block
  end
end

Cli <-- Explorer: Ledger
Cli --> Reporter: Ledger

@enduml

